# DrawGraphCore - 计算机图形学应用程序

> 一个基于 Qt 与 OpenGL 的计算机图形学教学项目，支持 2D/3D 图形绘制、区域填充、三维变换和 Bezier 曲线生成。

---

## 项目简介

`DrawGraphCore` 是一个使用 **Qt 框架 + OpenGL** 开发的计算机图形学实验平台，实现了多种经典图形学算法，涵盖基本图形绘制、多边形填充、三维模型变换及参数曲线生成。项目采用模块化设计，便于理解与扩展，适用于课程实践与学习参考。

---

## 项目结构
DrawGraphCore/

├── 核心文件/

│   ├── CGWORK1032.h/cpp          # 主窗口类

│   ├── glwidget.h/cpp            # OpenGL 绘制组件

│   ├── main.cpp                  # 程序入口

│   └── ui_CGWORK1032.h           # UI 界面自动生成文件

├── 图形基类/

│   ├── Shape.h                   # 图形抽象基类

│   └── ShapeManager.h/cpp        # 图形管理器（增删查改）

├── 2D图形实现/

│   ├── Line.h/cpp                # 直线类

│   ├── LineDrawer.h/cpp          # Bresenham 直线算法

│   ├── Rectangle.h/cpp           # 矩形类（含橡皮线预览）

│   ├── Circle.h/cpp              # 圆形类

│   ├── CircleDrawer.h/cpp        # 中点圆算法

│   └── Polygon.h/cpp             # 多边形类与边标志填充

├── 3D图形实现/

│   └── Cube.h/cpp                # 立方体类（含透视投影与变换）

├── 文档/

│   └── README.md

└── CGWORK1032.pro               # Qt 项目配置文件



## 功能特性

### 基本图形绘制
- 支持矩形、圆形绘制（带橡皮线实时预览）
- 自定义颜色设置
- 鼠标拖拽交互，直观易用

### 区域填充
- 多边形绘制：左键添加顶点，右键闭合
- 边标志算法实现区域填充
- 学号后四位数字填充（教学定制功能）
- 可分别设置边界色与填充色

### 三维变换
- 立方体绘制与透视投影显示
- 支持 X/Y/Z 轴平移与旋转
- 变换参数可调（步长、角度）
- 键盘快捷键控制动画效果

### 曲线绘制
- 三次 Bezier 曲线生成
- 控制点可视化标记
- 实时显示控制多边形

---

## 交互特性

| 特性 | 描述 |
|------|------|
| **智能工具栏** | 分组管理绘图模式（2D/3D/曲线等） |
| **状态栏提示** | 实时显示当前操作模式与帮助信息 |
| **键盘快捷键** | <ul><li>`A` / `L`：正向 / 反向变换</li><li>`Shift+A/L`：加速变换</li><li>`R`：重置立方体位置与角度</li></ul> |
| **鼠标交互** | 支持点击、拖拽、右键结束等多种输入方式 |

---

## 算法实现

| 类别 | 算法 |
|------|------|
| 直线绘制 | Bresenham 算法 |
| 圆形绘制 | 中点圆算法 |
| 多边形填充 | 边标志算法（Edge Flag Algorithm） |
| 三维变换 | 模型视图矩阵（Modelview Matrix） |
| 投影变换 | 简化透视投影模型 |
| 曲线生成 | 三次 Bezier 参数公式 |

> 所有图形均通过**纯算法方式逐像素绘制**，未依赖 Qt 内置绘图函数（如 QPainter），强化对底层原理的理解。

---

## 编译运行

### 环境要求
- Qt 5.12 或更高版本（推荐 Qt 5.15+）
- C++11 兼容编译器（g++, MSVC, Clang）
- OpenGL 2.0+ 支持（用于 `QOpenGLWidget`）

### 构建步骤
1. 使用 **Qt Creator** 打开 `CGWORK1032.pro`
2. 选择合适的构建套件（Kit）
3. 点击“构建” → “运行”
4. 启动成功后即可进入主界面

> 也可使用命令行构建：
>
> ```bash
> qmake CGWORK1032.pro
> make         # Linux/macOS
> nmake        # Windows (MSVC)
> ```

---

## 使用指南

### 基本绘制
1. 菜单选择：`图形绘制` → `绘制矩形` / `绘制圆形`
2. 在画布上按住鼠标左键拖动进行绘制
3. 通过 `设置` → `颜色` 更改前景色

### 多边形填充
1. 选择 `区域填充` → `绘制多边形`
2. 左键连续点击添加顶点
3. 右键单击完成闭合
4. 设置边界色与学号颜色后自动填充

### 三维变换
1. 选择 `三维变换` → `绘制立方体`
2. 选择对应变换模式（如“绕X轴旋转”）
3. 按 `A` / `L` 键执行变换，`Shift` 加速
4. 按 `R` 键恢复初始状态

### Bezier 曲线
1. 选择 `绘制曲线` → `绘制Bezier曲线`
2. 连续点击 4 个控制点
3. 系统自动生成并绘制三次 Bezier 曲线

---

## 技术亮点

### 架构设计
- **模块化分层**：各图形类型独立封装，职责清晰
- **易于扩展**：继承 `Shape` 基类即可新增图形类型
- **分组管理机制**：不同功能组互斥显示，避免干扰

### 算法核心
- **纯算法驱动绘制**：手动计算每个像素坐标
- **实时反馈技术**：橡皮线预览提升用户体验
- **正确透视投影**：实现 3D 到 2D 的合理映射

### 用户体验
- **状态同步更新**：状态栏实时反映当前模式
- **智能清屏逻辑**：跨组操作自动清除旧内容
- **撤销支持**：保留变换历史，方便调试

---

## 已知问题与改进方向

| 问题 | 说明 |
|------|------|
| 学号数字填充不完整 | 数字光栅化部分待完善 |
| 无文件 I/O 功能 | 尚未支持保存/加载图形数据 |
| 立方体消隐不足 | 当前为线框模型，缺少面剔除或 Z-buffer |

### 未来计划
- [ ] 实现 `.cgdata` 格式的文件保存与加载
- [ ] 添加更多图形学算法（DDA、扫描线填充、B样条等）
- [ ] 优化 3D 渲染性能，引入深度测试与光照
- [ ] 增加动画演示模块（旋转立方体、动态 Bezier）

---
